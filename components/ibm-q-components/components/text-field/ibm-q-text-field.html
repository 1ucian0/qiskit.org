<!--
@license
Copyright (c) 2017 The IBM Research authors. All rights reserved.
This code may only be used under the MIT style license found at https://ibmresearch.github.io/LICENSE.txt
The complete set of authors may be found at https://ibmresearch.github.io/AUTHORS.txt
The complete set of contributors may be found at https://ibmresearch.github.io/CONTRIBUTORS.txt
-->

<link rel="import" href="../../../polymer/polymer-element.html">
<link rel="import" href="../../../vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="../styles/default-theme.html">
<link rel="import" href="../styles/typography.html">

<!-- Reset vaadin default theme -->
<dom-module id="vaadin-text-field-reset-default-theme" theme-for="vaadin-text-field"></dom-module>

<dom-module id="ibm-q-text-field-default-theme">
  <template>
    <style>
      :host {
        /* TODO: Update CSS custom properties with default-theme. */
        --ibm-q-text-field-input-field-color: #152935;
        --ibm-q-text-field-input-field-background-color: rgba(61, 112, 178, 0.1);
        --ibm-q-text-field-focused-input-field-outline-color: var(--primary-color);

        font-family: var(--ibm-q-font-family-base);
        -webkit-box-flex: 1;
        -ms-flex: 1;
        flex: 1;
        margin-right: 1rem;
        margin-bottom: 1.5rem;

        /* Reset vaadin default styles */
        display: block;
        width: auto;
      }

      :host(:last-of-type) {
        margin-right: 0;
        margin-bottom: 0;
      }

      [part~="label"] {
        font-family: var(--ibm-q-font-family-base);
        font-size: 0.875rem;
        font-weight: 700;
        display: inline-block;
        vertical-align: baseline;
        margin-bottom: 0.625rem;
      }

      :host([disabled]) [part~="label"] {
        opacity: .5;
      }

      [part~="input-field"] {
        font-family: var(--ibm-q-font-family-base);
        font-size: 0.875rem;
        width: 100%;
        height: 2.5rem;
        min-width: 10rem;
        padding: 0 1rem;
        box-sizing: border-box;
        color: var(--ibm-q-text-field-input-field-color);
        background-color: var(--ibm-q-text-field-input-field-background-color);
        border: 1px solid transparent;
        cursor: text;
      }

      [part~="input-field"]::-webkit-input-placeholder {
        color: #5a6872;
      }

      :host([focused]) [part~="input-field"] {
        outline: 1px solid var(--ibm-q-text-field-focused-input-field-outline-color);
      }

      :host([disabled]) [part~="input-field"] {
        opacity: .5;
        cursor: not-allowed;
      }

      :host([disabled]:hover) [part~="input-field"] {
        border: 1px solid transparent;
      }

      :host([invalid]) [part~="input-field"] {
        box-shadow: 0 2px 0px 0px var(--ibm-q-text-field-error-color, var(--error-color));
      }

      [part~="value"] {
        border: 0;
        background: transparent;
        padding: 0;
        margin: 0;
        font: inherit;
        outline: none;
        box-shadow: none;
        cursor: inherit;
      }

      [part~="error-message"] {
        font-size: 0.6875rem;
        margin: .75rem 0 0;
        font-weight: 700;
        line-height: 1.5;
      }

      [part~="error-message"]::before {
        content: '*';
        display: inline-block;
        color: var(--ibm-q-text-field-error-color, var(--error-color));
        margin-right: 0.2rem;
      }
    </style>
  </template>
</dom-module>

<dom-module id="ibm-q-text-field">
  <script>
    (function() {
      /* eslint max-len: ["error", { "ignoreComments": true }] */

      /**
       * `<ibm-q-text-field>` is a Web Component providing a text field that
       * follows the IBM Q design language.
       *
       * ```html
       * <ibm-q-text-field value="IBM Q"></ibm-q-text-field>
       * ```
       *
       * ### Styling
       *
       * The following custom properties are exposed for styling:
       *
       * | Custom property | Description | Default |
       * | :-------------- | :---------- | :------ |
       * | `--ibm-q-text-field-input-field-color` | Input field text color | `#152935` |
       * | `--ibm-q-text-field-input-field-background-color` | Input field background color | `rgba(61, 112, 178, 0.1)` |
       * | `--ibm-q-text-field-focused-input-field-outline-color` | Input field outline color on focus | `var(--primary-color)` |
       * | `--ibm-q-text-field-error-color` | Input field color on error | `var(--error-color)` |
       *
       * @memberof IBMQ
       * @extends Vaadin.TextFieldElement
       * @demo components/text-field/demo/index.html
       */
      class TextFieldElement extends Vaadin.TextFieldElement {
        static get is() {
          return 'ibm-q-text-field';
        }
      }

      customElements.define(TextFieldElement.is, TextFieldElement);

      /**
       * @namespace IBMQ
       */
      window.IBMQ = window.IBMQ || {};
      IBMQ.TextFieldElement = TextFieldElement;
    })();
  </script>
</dom-module>
